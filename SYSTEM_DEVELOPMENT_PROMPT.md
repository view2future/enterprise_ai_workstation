# 专业企业数据管理平台开发规范

## 项目概述
构建一个专业的企业数据管理平台，专注于区域AI产业企业数据的存储、管理、分析和可视化。系统需支持10,000家企业数据的稳定运行，具备高性能、高可用性和良好的用户体验。

## 技术架构要求

### 前端技术栈
- **框架**: React 18+ with TypeScript
- **状态管理**: Zustand 或 Redux Toolkit
- **路由**: React Router v6+
- **API客户端**: React Query (TanStack Query)
- **表单**: React Hook Form
- **UI组件**: Shadcn/ui
- **样式**: Tailwind CSS with custom neubrutalism theme
- **图表**: Recharts
- **图标**: Lucide React
- **构建工具**: Vite

### 后端技术栈
- **运行时**: Node.js v20+
- **框架**: NestJS (使用 TypeScript)
- **数据库**: PostgreSQL 14+
- **ORM**: Prisma
- **认证**: JWT 带刷新令牌
- **文件处理**: Papa Parse, Excel4node
- **缓存**: Redis
- **后台任务**: BullMQ
- **日志**: Winston
- **验证**: Class Validator

### 基础设施
- **容器化**: Docker
- **编排**: Docker Compose
- **监控**: Prometheus + Grafana
- **CI/CD**: GitHub Actions

## 系统架构设计

### 1. 分层架构
```
┌─────────────────────────────────────┐
│           表示层 (React)             │
├─────────────────────────────────────┤
│         API网关 (NestJS)            │
├─────────────────────────────────────┤
│       业务逻辑层 (Services)         │
├─────────────────────────────────────┤
│      数据访问层 (Prisma)            │
├─────────────────────────────────────┤
│     数据持久化 (PostgreSQL)         │
├─────────────────────────────────────┤
│      后台处理 (BullMQ)              │
├─────────────────────────────────────┤
│         缓存层 (Redis)              │
└─────────────────────────────────────┘
```

### 2. 数据库设计
- **企业主表**: 存储核心企业信息
- **融资信息表**: 存储融资轮次、金额等信息
- **AI应用信息表**: 存储AI应用场景和实施程度
- **百度AI使用信息表**: 存储百度AI产品使用情况
- **运营标签表**: 存储企业运营状态标签
- **变更日志表**: 跟踪所有数据变更历史
- **导入任务表**: 追踪文件导入作业
- **筛选模板表**: 存储用户保存的筛选条件
- **系统配置表**: 存储枚举值和字段配置
- **用户权限表**: 存储用户角色和权限

### 3. 性能优化策略
- 数据库索引优化
- Redis缓存策略
- 数据分页处理
- 图表懒加载
- 文件上传压缩

## 功能模块设计

### 1. 仪表板模块
- **KPI卡片**: 展示企业总数、AI采用率、百度AI使用情况等关键指标
- **分布图表**: 按行业、AI场景、地区等维度展示企业分布
- **趋势分析**: 显示时间序列上的企业增长趋势
- **实时统计**: 动态更新关键业务指标
- **个性化配置**: 允许用户自定义仪表板布局

### 2. 企业管理模块
- **CRUD操作**: 完整的企业数据创建、读取、更新、删除功能
- **动态字段**: 支持自定义字段的添加和管理
- **数据验证**: 前后端双重数据验证机制
- **变更追踪**: 记录每次数据修改的历史
- **批量操作**: 支持批量编辑和更新

### 3. 数据导入导出模块
- **智能导入**: 支持Excel/CSV格式批量导入
- **字段映射**: 提供可视化的字段映射界面
- **数据验证**: 导入前自动验证数据格式和完整性
- **进度追踪**: 实时显示导入进度和错误报告
- **模板生成**: 自动生成导入模板文件
- **批量导出**: 支持按筛选条件导出数据

### 4. 搜索筛选模块
- **全文搜索**: 支持企业名称、关键词等全文搜索
- **高级筛选**: 多维度、多条件组合筛选
- **筛选模板**: 保存常用筛选条件
- **实时过滤**: 即时更新搜索结果
- **模糊匹配**: 支持模糊搜索和联想输入

### 5. 用户权限模块
- **角色管理**: 定义不同用户角色和权限
- **访问控制**: 基于角色的访问控制
- **安全认证**: JWT令牌认证机制
- **审计日志**: 记录用户操作行为

### 6. 报告生成模块
- **模板引擎**: 支持多种报告模板
- **数据可视化**: 内置图表和统计功能
- **格式输出**: 支持PDF、Excel等多种格式
- **自动化报告**: 定时生成和发送报告
- **自定义报表**: 允许用户自定义报告内容

## UI/UX 设计规范

### 1. 视觉风格 (Neubrutalism)
- **边框**: 使用粗边框 (3-4px) 突出元素
- **阴影**: 使用厚实的投影效果
- **颜色**: 高对比度配色方案
- **字体**: 现代无衬线字体，粗体强调
- **间距**: 大胆的留白和间距设计

### 2. 交互体验
- **微交互**: 添加悬停、点击等反馈效果
- **加载状态**: 清晰的加载指示器
- **错误处理**: 友好的错误提示和解决方案
- **快捷操作**: 键盘快捷键支持
- **响应式设计**: 适配各种设备尺寸

### 3. 用户友好特性
- **引导教程**: 首次使用引导流程
- **智能建议**: 基于数据的智能推荐
- **操作确认**: 重要操作的二次确认
- **撤销功能**: 支持撤销最近的操作
- **个性化设置**: 用户偏好定制

## 开发规范

### 1. 代码规范
- **命名规范**: 使用有意义的变量和函数名
- **注释规范**: 关键逻辑添加详细注释
- **文件组织**: 按功能模块组织文件结构
- **错误处理**: 统一的错误处理机制
- **测试覆盖**: 核心功能必须有单元测试

### 2. 安全规范
- **输入验证**: 所有输入数据必须验证
- **SQL注入防护**: 使用参数化查询
- **XSS防护**: 输出数据适当转义
- **CSRF防护**: 实施CSRF令牌验证
- **敏感数据加密**: 加密存储敏感信息

### 3. 性能规范
- **数据库查询优化**: 合理使用索引和连接
- **前端性能**: 减少不必要的渲染
- **内存管理**: 避免内存泄漏
- **网络请求优化**: 合理使用缓存
- **资源压缩**: 压缩静态资源

## 部署与运维

### 1. 环境配置
- **开发环境**: Docker Compose 本地开发
- **测试环境**: 镜像生产环境配置
- **生产环境**: 云平台部署

### 2. 监控与日志
- **应用监控**: 性能和错误监控
- **日志收集**: 结构化日志记录
- **健康检查**: 定期健康状态检查
- **告警机制**: 异常情况及时通知

### 3. 数据备份
- **定期备份**: 自动化数据备份
- **灾难恢复**: 快速恢复机制
- **数据同步**: 多环境数据同步
- **版本控制**: 数据库迁移版本管理

## 项目管理

### 1. 开发流程
- **敏捷开发**: 2周冲刺周期
- **代码审查**: 所有代码必须经过审查
- **持续集成**: 自动化测试和构建
- **版本发布**: 语义化版本管理

### 2. 质量保证
- **单元测试**: 核心逻辑测试覆盖率≥80%
- **集成测试**: API和数据库集成测试
- **端到端测试**: 关键用户路径测试
- **性能测试**: 负载和压力测试

### 3. 文档要求
- **API文档**: OpenAPI规范
- **用户手册**: 详细使用指南
- **部署文档**: 部署和配置说明
- **架构文档**: 系统设计和决策记录

## 成功标准

### 1. 功能完成度
- [ ] 核心功能100%实现
- [ ] 用户体验流畅无阻
- [ ] 性能满足预期要求
- [ ] 安全性符合标准

### 2. 技术指标
- [ ] 支持10,000+企业数据
- [ ] 页面加载时间<3秒
- [ ] 数据导入速度>1000条/分钟
- [ ] 系统可用性>99.5%

### 3. 用户满意度
- [ ] 用户界面直观易用
- [ ] 操作流程简洁高效
- [ ] 错误处理友好合理
- [ ] 帮助文档齐全易懂